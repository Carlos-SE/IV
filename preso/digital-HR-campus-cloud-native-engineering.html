<!doctype html>
<html>
    <head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<title>Cloud native engineering</title>

	<link rel="stylesheet" href="dist/reset.css">
	<link rel="stylesheet" href="dist/reveal.css">
	<link rel="stylesheet" href="dist/digital-hr-campus.css">
        <link rel="stylesheet" href="dist/extra.css">

	<!-- Theme used for syntax highlighted code -->
	<link rel="stylesheet" href="plugin/highlight/monokai.css">
    </head>
    <body>
	<div class="reveal">
	    <div class="slides">
		<section data-background="https://live.staticflickr.com/1470/25389053502_a23fc6a3ff_k_d.jpg"><h1>Cloud native engineering: Intro</h1>
                    <h2>Digital HR campus</h2>
                    <h3><a href="https://github.com/JJ"><code>JJ</code>
		        en GitHub</a>, <a href="https://twitter.com/jjmerelo"><code>@jjmerelo</code></a></h3>
                </section>


                <section><!-- Initial definitions -->

                    <section>
                        <h1>Cloud native engineering includes</h1>
                        <h2 class="fragment">Best practices in code development</h2>
                        <h2 class="fragment">Infraestructure as code</h2>
                        <h2 class="fragment">Loosely coupled software
                            architectures</h2>
                    </section>

                    <section><h1>As well as...</h1>
                        <h1 class="fragment">Push-button application
                            deployment</h1>
                        <h2 class="fragment">Repeatable, idempotent</h2>
                    </section>

                    <section><h1>The <em>current</em> way of designing,
                        developing and releasing software</h1></section>

                    <section
                        data-background="https://live.staticflickr.com/65535/51278520508_833d0c7ae3_k_d.jpg"><h1>Let's
                        do cloud native engineering</h1>
                    </section>
                </section>

                <section>
                    <section>
                        <h1>Best practices first</h1>
                        <h1 class="fragment">Use code repositories.</h1>
                    </section>

                    <section>
                        <h1>GitHub</h1>
                        <h1 class="fragment">Configure email/name</h1>
                        <h2 class="fragment">Including repo-specific configuration</h2>
                        <h1 class="fragment">Public/private key pair</h1>

                        <aside class="notes">Sometimes you need to have specific
                    configurations for company repos, such as signed commits, or
                            use the company email for that</aside>
                    </section>

                    <section>
                        <h1>Branch out</h1>
                        <h2>And use great names</h2>
                        <aside class="notes"><em>Siempre</em> se
                            trabaja desde una rama, nunca se incorpora a
                            main o master sin que se haya revisado el
                            código, aunque sea por uno mismo. Es esencial
                            trabajar en las ramas. You know the joke
                            about the three biggest problems in computing:
                            naming things and off-by-one problems. </aside>
                    </section>

		    <section
		            data-background='https://live.staticflickr.com/749/32133243512_b875580879_k_d.jpg'><h1>PRs
		            <em>always from a branch</em></h1>

		                <aside class='notes'>Al editar desde la web se
		            crea una rama automáticamente; si no, se crea una
		            rama con el nombre del hito, por ejemplo. Never from
		            your own copy of main. </aside>
		            </section>

                            <section><h1>Pull types</h1>
                                <h1 class="fragment"><em>Squash</em></h1>
                                <h1 class="fragment"><em>Merge commit</em></h1>
                                <h1 class="fragment">Rebase y <em>merge</em>
                                    ⋆⋆⋆⋆⋆</h1>

                                <aside class="notes">Some companies want only
                            squash commits, some others want to do
                            rebase. Almost none want merge commits. It's a
                            matter of taste, company size, and also testing and
                                    QA resources.</aside>
                            </section>

                            <section><h1>Solving conflicts</h1>
                                <pre><code>
git checkout --theirs fichero
git checkout --ours fichero
                                </code></pre>
                                <h2 class="fragment">If everything fails</h2>
                                <pre class="fragment"><code>git clone url
git rm origin
gti remote add origin url-de-mi-fork
git push --force</code></pre>
                                <aside class="notes">Cuidado con hacer esto
                                    con un PR abierto; si se hace así, se
                                    cerrará. En todo caso, esto no debería ocurrir si siempre se pide PR desde una rama.</aside>
                            </section>

                            <section><h1>Pull requests</h1>
                                <h2>Big chance to review code</h2>
                            </section>

                            <section><h1><em>Tagging</em> y
                                <em>releasing</em></h1>

                                <h2>Frequent MVP delivery</h2>
                                <pre><code>git tag -a v0.0.1 -m "First release"</code></pre>
                            </section>

                            <section data-background='https://live.staticflickr.com/1191/1255196757_7d498f21c6_k_d.jpg'><h1>Yéndonos por las ramas</h1>
                                <pre><code>git checkout v0.0.1
git checkout -b branch-from-tag</code></pre>
                            </section>

                            <section><h1>Assignments</h1>

                                <h1 class="fragment">Find code errors in this
                                    section, fix them via PR</h1>

                                <h1 class="fragment">Part of these slides might
                                    be in Spanish. Fix that via PR</h1>

                                <h1 class="fragment">Find any other kind of
                                    error in these slides and fix them</h1>
                            </section>

                </section>


                <!-- Design thinking/domain driven design -->
                <section>
                    <section><h1>Many chances to design an application from
                        scratch</h1>
                        <h2 class="fragment">Internal tooling</h2>
                        <h2 class="fragment">Proof of concept</h2>
                        <h2 class="fragment">A real product</h2>
                    </section>

                    <section>
                            <h1><em>Design thinking</em>: thinking to design (a product)</h1>
                    </section>
                    
                    <section data-background="https://live.staticflickr.com/65535/51280249085_0641a84a36_k_d.jpg">
                        <h1>Facing real needs, focused on clients</h1>
                    </section>
                    
                    <section><h1>Gets inspiration from news or statistics</h1>
                        <img src="img/tractorada.png"
                             alt="tractorada">
                    </section>
                    
                    <section><h1>Empathize</h1>
                        <h2 class="fragment">Problem: agribusiness needs
                            fair prices</h2>
                        
                        <aside class="notes">Se trata de ver
                            siempre qué es lo que el usuario/cliente va a
                            necesitar, y verlo desde la perspectiva del
                            mismo, no desde el punto de vista de "quiero
                            usar no sé qué framework"</aside>
                    </section>
                    
                    <section><h1>Software engineering is about solving
                        problems</h1></section>
                    
                    <section>
                        <h1>Domain Driven Design</h1>
                        <h2 class="fragment">Identify value objects,
                            entities and aggregates</h2>
                    </section>
                    
                    <section><h1>Make the class/package hierarchy reflect
                        that</h1>
                        
                        <aside class="notes">Although Conway's law says that
                            the design of a system ends up resembling the
                            organization that created it, it need not be that way</aside>
                    </section>
                    
                    <section><h1>Choose the right data structures</h1>
                        
                        <aside class="notes">There's a rich amount of data
                            structures that can be used, as well as OO
                            attributes. Don't go for the easy, go for the
                            adequate.</aside>
                    </section>
                    
                    <section data-background="https://live.staticflickr.com/65535/51279484862_350ed209af_k_d.jpg"><h1>Single responsibility principle</h1>
                        <h2 class="fragment">Most important principle in
                            cloud native engineering</h2>
                    </section>

                </section>

                <section><!-- Continuous integration -->
                    <section>
                        <h1>Continuous integration/delivery is</h1>
                        <h2 class="fragment">(testing) infrastructure as
                            code</h2>
                        <h2 class="fragment">Repeatable, push-button
                            development</h2>
                        <h2 class="fragment">Looking for the big red button</h2>

                        <aside class="notes">They use the fact that git is a
                            workflow management tool</aside>
                    </section>


                    <section><h1>YAML used extensively</h1>
                            <h2 class="fragment">Infrastructure as (declarative)
                            code</h2>
                        </section>

                        <section><h1>Travis</h1>
                            <pre><code data-line-numbers="1-6|7,8|9,10|11">	language: node_js
	node_js:
	  - "10"
	  - "11"
	  - "12"
	before_install:
	  - npm install -g mocha
        install:
	  - cd src; npm install .
	script: cd src; mocha</code></pre>

                            <aside class="notes">No es que aconseje travis, pero
                                al menos tiene un formato simple, que se usa también en
                                otros sistemas de CI, y al final tiene prácticamente
                                todo lo necesario para un sistema CI</aside>
                        </section>

                        <section><h1>Github actions FTW</h1>
                            <pre><code data-line-numbers="1|2-9|10-12|13|14|15-17|18">name: "Test Nim"
on:
  push:
    paths:
      - "ejemplos/nim/**"
  pull_request:
    paths:
      - "ejemplos/nim/**"
jobs:
  test-nim:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: jiro4989/setup-nim-action@v1
        with:
          nim-version: '1.4.0' # default is 'stable'
      - run: cd ejemplos/nim && nimble test -Y</code></pre>
                        </section>

                    </section>

                    <section> <!-- Acelerando los tests -->
                        <section><h1>F in F.I.R.S.T.</h1>
                            <h2 class="fragment">Don't let devs lose
                                <em>flow</em> state</h2>
                            <h2 class="fragment">Depencency installs: lost time</h2>
                        </section>

                        <section><h1>Solution ①: <code>fatpack</code></h1>
                            <pre><code>language: minimal
script:
  - prove -c t/proyecto.t
                            </code></pre>
                            <aside class="notes">Siendo en Perl, que
                                está incluido en el runner, más rápido
                                todavía</aside>
                        </section>

                        <section><h1>Solution ②: Docker</h1>
                            <pre><code data-line-numbers="1|5-7|12">FROM jjmerelo/perl-test-text
LABEL version="1.0" maintainer="JJ Merelo &lt;jjmerelo@GMail.com>" perl5version="5.22"

WORKDIR /home/install
ADD cpanfile .
RUN apt-get update && apt-get install -y git
RUN cpanm --installdeps .

VOLUME /test
WORKDIR /test

ENTRYPOINT cp /home/install/data/*.dic /home/install/data/*.aff /test && prove -I/usr/lib -c  </code></pre>
                        </section>

                        <section><h1>Back to Travis...</h1>
                            <pre><code data-line-numbers="1,2|4-6|8,9">language:
  - minimal

install:
  - docker pull jjmerelo/p5-devqagrx:latest
  - docker images

script:
  - docker run -t -v  $TRAVIS_BUILD_DIR:/test jjmerelo/p5-devqagrx:latest</code></pre>
                        </section>

                        <section data-background="https://live.staticflickr.com/1970/31498119578_f07e6e7301_k_d.jpg"><h1>Also</h1>
                            <h2 class="fragment">User cachés</h2>
                            <h2 class="fragment">Make tests parallel</h2>
                            <h2 class="fragment">Split and spread</h2>
                        </section>

                        <section><h1>Assignment</h1>
                            <h2 class="fragment">Create a repo from <a href="https://github.com/JJ/linted-python-repo/">git.io/dhr-ci
                            </a></h2>
                            <h2 class="fragment">Describe the problem you want
                                to solve in the README.</h2>
                            <h2 class="fragment">Change the Python code to
                                provide an initial implementation</h2>
                            <h1 class="fragment">Repeat until tests pass!</h1>
                        </section>
                </section>

                <!-- Microservices and all that -->

                <section>
                    <section
                        data-background="https://live.staticflickr.com/65535/51280310641_3219c66c35_k_d.jpg">
                        <h1>Cloud native architectures</h1>
                        <h2 class="fragment">Loosely coupled</h2>
                        <h2 class="fragment">Independently deployed/tested/scaled</h2>
                        <h3 class="fragment">Infrastructure as code</h3>
                        <h3 class="fragment">Observability>
                    </section>

                    <section><h1>Microservices</h1>
                        <h2 class="fragment">(Usually) REST based backends</h2>
                        <h2 class="fragment">(Usually) Component-based
                            frontends</h2>
                        <h2 class="fragment">Containers galore</h2>
                        <h2 class="fragment">Orchestration services</h2>
                    </section>

                    <section><h1>Cloud-native services</h1>
                        <h1>X as a service</h1>
                        <h2 class="fragment">Where X = logs, configuration,
                            monitoring, data...</h2>
                        <h3 class="fragment">Mensajería, identidad, CDN...</h3>
                    </section>

                    <section><h1>Serverless architectures</h1>
                        <h1 class="fragment">AWS Lambda, Vercel, Azure
                            Functions</h1>
                    </section>
                </section>

                <section data-background="https://live.staticflickr.com/4173/33779256694_74dd997f16_k_d.jpg"><h1>Future is cloud native</h1>
                    <h1 class="fragment">Start building it now</h1>
                </section>

	    </div>
	</div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
			    hash: true,
                            width: '98%',
                            controls: true,
                            progress: true,
                            history: true,
			    plugins: [ RevealHighlight, RevealNotes ]
			});
		</script>
	</body>
</html>
